<!DOCTYPE html>

<html>

<head>
	<meta charset="utf-8" />
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, minimal-ui">
	<title>mahjongh5</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>
	<script>
		const socket = io("http://140.118.127.157:3000");
		window.onload = () => {
			$("#waiting").hide();
		};
		function join() {
			const name = $("#name").val();
			if (name === "") return;
			localStorage.setItem("name", name);

			socket.emit("join", name, (uuid, err) => {
				if (err) {
					console.log("this name was be used");
					return;
				}
				localStorage.setItem("uuid", uuid);
				$("#login").hide();
				$("#waiting").show();
			});

		};
		socket.on("readyToStart", (roomName, playerList) => {
			localStorage.setItem("room", roomName);
			localStorage.setItem("players", JSON.stringify(playerList));
			window.location = "./game.html";
		});
	</script>
	<style>
		body {
			text-align: center;
			height: 100%;
		}
		div {
			position: relative;
			top:30vh;
		}
		input {
			height: 50px;
			width: 400px;
			border-radius: 10px;
			font-size: 24pt;
			margin-bottom: 40px;
		}
		button {
			height: 50px;
			width: 150px;
			border-radius: 10px;
			background-color: rgb(26, 87, 199);
			font-size: 24pt;
			color: white;
		}
		#waiting p {
			font-size: 50pt;
		}
	</style>
</head>

<body>
	<div id="login">
		<p><input id="name" placeholder="Name"></p>
		<p></p><button onclick="join()">Join</a></button></p>
	</div>
	<div id="waiting">
		<p>WAITING...</p>
	</div>
</body>

</html>